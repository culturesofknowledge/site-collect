Get up and running
==================

A list of things you'll need to get the EMLO web-form up and running

These notes are for opensuse but it should be obvious how to switch them over (zypper==apt-get)

You'll need a postgres and mongo database (see later for docker instructions on installing)
docker pull mongo
docker pull postgres

# You'll need some dev files
zypper in nodejs nodejs-devel		# On Ubuntu possibly: apt-get install nodejs-dev
zypper in postgresql-devel

# Install this one to global
sudo npm install sql-generate@0.3.0 -g

#
# If IntelliJ IDE
# If you create a project and point it at your code it will actually edit and add files over the top of yours.
# In the case of it needs to add a few debug ones.
You'll need to svn revert those in svn and delete the new ones in folders /views and the route folder


# Install modules
npm install # ignore warniong about sql-generate

# Setup which config (choose in config/config.json or create a new one)
export NODE_ENV='development'

# run it
node server.js



Docker setup
============

Postgres (EMLO)
--------------

### Get the image from the emloeditor repository and building
https://source.bodleian.ox.ac.uk/gitlab/emlo/emloeditor/tree/master/docker-postgres

    

mongoDB (EMLO)
-------------

### Get it
Image at https://registry.hub.docker.com/_/mongo/
	docker pull mongo:2.4

### create an instance
	docker create --name emlo-edit-mongo -P mongo:2.4

### copy data to is
find the volume
	docker inspect --format='{{.Volumes}}' <instance-name>

and copy data file to it
	cp <database-export-folder> /var/lib/docker/vfs/dir/<volume-location/


### Now load database with datafile
If not run yet
	docker start <instance-name>

connect to instance via bash
	docker exec -it <instance-name> /bin/bash

 inside the instance terminal
	cd <to-data-file>
	mongorestore --db emlo-edit <database-export-folder>
